<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameHub</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéÆ</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ff6b35; --secondary: #00f5d4; --accent: #9b5de5; --dark: #0a0a0a; --card: rgba(255,255,255,0.05); --border: rgba(255,255,255,0.1); }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Outfit', sans-serif; background: var(--dark); min-height: 100vh; color: #fff; overflow-x: hidden; }
        
        .dots { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; overflow: hidden; }
        .dot { position: absolute; background: var(--secondary); border-radius: 50%; opacity: 0.3; animation: float linear infinite; }
        @keyframes float { 0% { transform: translateY(100vh) translateX(0); } 100% { transform: translateY(-100px) translateX(50px); } }
        
        nav { background: rgba(10,10,10,0.95); padding: 16px 32px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border); }
        .logo { font-size: 26px; font-weight: 800; display: flex; align-items: center; gap: 10px; }
        .logo span { background: linear-gradient(135deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .nav-links { display: flex; gap: 6px; list-style: none; flex-wrap: wrap; }
        .nav-links a { color: #fff; text-decoration: none; padding: 10px 18px; border-radius: 10px; font-weight: 500; cursor: pointer; transition: background 0.2s; }
        .nav-links a:hover, .nav-links a.active { background: var(--primary); }
        .music-btn { padding: 10px 16px; background: var(--card); border: 1px solid var(--border); border-radius: 20px; color: #fff; cursor: pointer; font-family: inherit; }
        .music-btn.playing { border-color: var(--secondary); color: var(--secondary); }

        .container { max-width: 1300px; margin: 0 auto; padding: 40px 24px; position: relative; z-index: 1; }
        .page { display: none; } .page.active { display: block; }

        .hero { text-align: center; padding: 60px 0; }
        .hero h1 { font-size: clamp(36px, 8vw, 72px); font-weight: 800; margin-bottom: 16px; }
        .hero h1 span { background: linear-gradient(135deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .hero p { color: rgba(255,255,255,0.6); font-size: 18px; margin-bottom: 32px; }
        .hero-btns { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
        
        .btn { padding: 14px 32px; border-radius: 12px; font-weight: 600; font-family: inherit; cursor: pointer; border: none; transition: transform 0.2s, box-shadow 0.2s; font-size: 15px; }
        .btn:hover { transform: translateY(-2px); }
        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--accent)); color: #fff; }
        .btn-secondary { background: var(--card); color: #fff; border: 1px solid var(--border); }
        .btn-random { background: linear-gradient(135deg, var(--secondary), #00b894); color: #000; }

        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px; }
        .section-header h2 { font-size: 28px; font-weight: 700; }
        .section-header h2 span { color: var(--secondary); }

        .search-bar { display: flex; gap: 12px; margin-bottom: 24px; flex-wrap: wrap; }
        .search-input { flex: 1; min-width: 200px; padding: 14px 20px; border-radius: 12px; border: 1px solid var(--border); background: var(--card); color: #fff; font-size: 15px; font-family: inherit; }
        .search-input:focus { outline: none; border-color: var(--primary); }
        .search-input::placeholder { color: rgba(255,255,255,0.4); }
        .filters { display: flex; gap: 8px; flex-wrap: wrap; }
        .filter-btn { padding: 10px 18px; border-radius: 10px; border: 1px solid var(--border); background: var(--card); color: #fff; font-family: inherit; cursor: pointer; font-size: 13px; }
        .filter-btn:hover { border-color: var(--secondary); }
        .filter-btn.active { background: var(--primary); border-color: var(--primary); }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 24px; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; overflow: hidden; }
        .card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(255,107,53,0.1), rgba(155,93,229,0.1)); opacity: 0; transition: opacity 0.3s; }
        .card:hover { transform: translateY(-10px) scale(1.02); border-color: var(--primary); box-shadow: 0 20px 40px rgba(255,107,53,0.2), 0 0 20px rgba(0,245,212,0.1); }
        .card:hover::before { opacity: 1; }
        .card-head { display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px; }
        .card-icon { width: 48px; height: 48px; background: linear-gradient(135deg, var(--primary), var(--accent)); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; }
        .fav-btn { width: 36px; height: 36px; border-radius: 8px; border: 1px solid var(--border); background: transparent; color: rgba(255,255,255,0.5); font-size: 18px; cursor: pointer; }
        .fav-btn:hover, .fav-btn.active { border-color: gold; color: gold; }
        .card h3 { font-size: 20px; margin-bottom: 6px; }
        .card p { color: rgba(255,255,255,0.5); font-size: 14px; margin-bottom: 6px; }
        .card-tag { display: inline-block; padding: 4px 12px; background: rgba(0,245,212,0.15); border-radius: 20px; font-size: 12px; color: var(--secondary); margin-bottom: 16px; }
        .play-btn { width: 100%; padding: 12px; border-radius: 10px; border: none; background: linear-gradient(135deg, var(--primary), var(--accent)); color: #fff; font-weight: 600; font-family: inherit; cursor: pointer; }
        .play-btn:hover { opacity: 0.9; }

        .app-card { text-align: center; cursor: pointer; }
        .app-icon { width: 64px; height: 64px; margin: 0 auto 16px; background: linear-gradient(135deg, var(--secondary), #00b894); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 32px; }

        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center; padding: 20px; }
        .modal.active { display: flex; }
        .modal-box { background: var(--dark); border: 1px solid var(--border); border-radius: 20px; padding: 32px; max-width: 500px; width: 100%; max-height: 85vh; overflow-y: auto; position: relative; }
        .modal-close { position: absolute; top: 16px; right: 16px; width: 36px; height: 36px; border-radius: 8px; border: 1px solid var(--border); background: transparent; color: #fff; font-size: 20px; cursor: pointer; }
        .modal h2 { font-size: 24px; margin-bottom: 20px; padding-right: 40px; }

        .calc-display { background: #000; border-radius: 12px; padding: 20px; font-size: 32px; text-align: right; margin-bottom: 16px; font-family: monospace; }
        .calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
        .calc-btn { padding: 18px; border-radius: 10px; border: 1px solid var(--border); background: var(--card); color: #fff; font-size: 18px; cursor: pointer; font-family: monospace; }
        .calc-btn:hover { background: rgba(255,255,255,0.1); }
        .calc-btn.op { background: rgba(255,107,53,0.3); }
        .calc-btn.eq { grid-column: span 4; background: linear-gradient(135deg, var(--primary), var(--accent)); border: none; }

        .app-input { width: 100%; padding: 14px; border-radius: 10px; border: 1px solid var(--border); background: #000; color: #fff; font-size: 15px; font-family: inherit; margin-bottom: 12px; }
        .app-input:focus { outline: none; border-color: var(--secondary); }
        .app-textarea { width: 100%; padding: 16px; border-radius: 12px; border: 1px solid var(--border); background: #000; color: #fff; font-size: 15px; font-family: inherit; min-height: 250px; resize: vertical; margin-bottom: 12px; }
        .app-btn { width: 100%; padding: 14px; border-radius: 10px; border: none; background: linear-gradient(135deg, var(--secondary), #00b894); color: #000; font-weight: 600; font-family: inherit; cursor: pointer; margin-bottom: 10px; }

        .todo-row { display: flex; gap: 10px; margin-bottom: 16px; }
        .todo-row input { flex: 1; margin: 0; }
        .todo-row button { width: auto; padding: 14px 20px; margin: 0; }
        .todo-item { display: flex; align-items: center; gap: 12px; padding: 14px; background: #000; border-radius: 10px; margin-bottom: 10px; }
        .todo-item.done { opacity: 0.5; }
        .todo-item.done span { text-decoration: line-through; }
        .todo-check { width: 22px; height: 22px; border-radius: 6px; border: 2px solid var(--border); background: transparent; cursor: pointer; flex-shrink: 0; }
        .todo-check.checked { background: var(--secondary); border-color: var(--secondary); }
        .todo-item span { flex: 1; }
        .todo-del { width: 28px; height: 28px; border-radius: 6px; border: none; background: rgba(255,107,53,0.3); color: var(--primary); cursor: pointer; }

        .sw-display { font-size: 48px; text-align: center; padding: 32px; background: #000; border-radius: 16px; margin-bottom: 20px; font-family: monospace; }
        .sw-btns { display: flex; gap: 12px; }
        .sw-btns button { flex: 1; }

        .pass-display { background: #000; border-radius: 12px; padding: 20px; font-family: monospace; word-break: break-all; text-align: center; margin-bottom: 16px; }

        .ttt-board { display: grid; grid-template-columns: repeat(3,1fr); gap: 8px; max-width: 260px; margin: 0 auto 20px; }
        .ttt-cell { aspect-ratio: 1; border-radius: 10px; border: 1px solid var(--border); background: #000; font-size: 40px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .ttt-cell:hover:not(.taken) { background: rgba(255,107,53,0.2); }
        .ttt-cell.x { color: var(--primary); }
        .ttt-cell.o { color: var(--secondary); }
        .game-status { text-align: center; padding: 14px; background: #000; border-radius: 10px; margin-bottom: 16px; font-weight: 600; }

        .mem-board { display: grid; grid-template-columns: repeat(4,1fr); gap: 8px; max-width: 320px; margin: 0 auto 20px; }
        .mem-card { aspect-ratio: 1; border-radius: 10px; background: linear-gradient(135deg, var(--primary), var(--accent)); font-size: 28px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .mem-card.flip, .mem-card.match { background: #000; border: 1px solid var(--secondary); }
        .mem-card:not(.flip):not(.match) span { visibility: hidden; }
        .mem-card.match { opacity: 0.5; }

        .rx-box { height: 200px; border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 600; cursor: pointer; margin-bottom: 20px; }
        .rx-box.wait { background: #000; border: 1px solid var(--border); }
        .rx-box.ready { background: #c0392b; }
        .rx-box.go { background: #27ae60; }
        .rx-stats { display: grid; grid-template-columns: repeat(3,1fr); gap: 12px; text-align: center; }
        .rx-stat { background: #000; border-radius: 10px; padding: 14px; }
        .rx-val { font-size: 24px; font-weight: 700; color: var(--secondary); font-family: monospace; }
        .rx-lbl { font-size: 11px; color: rgba(255,255,255,0.5); text-transform: uppercase; }

        .chat-box { background: #000; border-radius: 12px; padding: 16px; height: 300px; overflow-y: auto; margin-bottom: 12px; }
        .chat-msg { padding: 10px 14px; border-radius: 12px; margin-bottom: 10px; max-width: 85%; }
        .chat-msg.user { background: linear-gradient(135deg, var(--primary), var(--accent)); margin-left: auto; }
        .chat-msg.ai { background: var(--card); }
        .chat-row { display: flex; gap: 10px; }
        .chat-row input { flex: 1; margin: 0; }
        .chat-row button { width: auto; padding: 14px 20px; margin: 0; }

        .empty { text-align: center; padding: 60px 20px; color: rgba(255,255,255,0.5); }

        @media (max-width: 768px) {
            nav { padding: 12px 16px; flex-wrap: wrap; gap: 12px; }
            .nav-links { width: 100%; justify-content: center; }
            .container { padding: 24px 16px; }
            .hero h1 { font-size: 32px; }
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="dots" id="dots"></div>
    <nav>
        <div class="logo">üéÆ <span>GameHub</span></div>
        <ul class="nav-links">
            <li><a onclick="showPage('home')" id="home-link" class="active">Home</a></li>
            <li><a onclick="showPage('games')" id="games-link">Games</a></li>
            <li><a onclick="showPage('favorites')" id="favorites-link">Favorites</a></li>
            <li><a onclick="showPage('apps')" id="apps-link">Apps</a></li>
            <li><a onclick="showPage('minigames')" id="minigames-link">Mini Games</a></li>
        </ul>
        <button class="music-btn" id="music-btn" onclick="toggleMusic()">üéµ Music</button>
    </nav>

    <div class="container">
        <div class="page active" id="home-page">
            <div class="hero">
                <h1>Play. <span>Create.</span> Win.</h1>
                <p>50+ free games, useful apps, and built-in mini games.</p>
                <div class="hero-btns">
                    <button class="btn btn-primary" onclick="showPage('games')">üéØ Browse Games</button>
                    <button class="btn btn-random" onclick="randomGame()">üé≤ Random Game</button>
                    <button class="btn btn-secondary" onclick="showPage('apps')">‚ö° Apps</button>
                </div>
            </div>
            <div class="section-header"><h2>üî• <span>Featured</span></h2></div>
            <div class="grid" id="featured"></div>
        </div>

        <div class="page" id="games-page">
            <div class="section-header"><h2>üéÆ All <span>Games</span></h2><span id="count" style="color:rgba(255,255,255,0.5)"></span></div>
            <div class="search-bar">
                <input type="text" class="search-input" id="search" placeholder="üîç Search..." oninput="filter()">
                <div class="filters" id="filters"></div>
            </div>
            <div class="grid" id="games-grid"></div>
        </div>

        <div class="page" id="favorites-page">
            <div class="section-header"><h2>‚≠ê <span>Favorites</span></h2></div>
            <div class="grid" id="fav-grid"></div>
            <p class="empty" id="no-fav" style="display:none">No favorites yet. Click ‚≠ê on any game!</p>
        </div>

        <div class="page" id="apps-page">
            <div class="section-header"><h2>‚ö° <span>Apps</span></h2></div>
            <div class="grid">
                <div class="card app-card" onclick="openApp('calc')"><div class="app-icon">üßÆ</div><h3>Calculator</h3><p>Math calculations</p></div>
                <div class="card app-card" onclick="openApp('note')"><div class="app-icon">üìù</div><h3>Notepad</h3><p>Write notes</p></div>
                <div class="card app-card" onclick="openApp('todo')"><div class="app-icon">‚úÖ</div><h3>To-Do</h3><p>Track tasks</p></div>
                <div class="card app-card" onclick="openApp('sw')"><div class="app-icon">‚è±Ô∏è</div><h3>Stopwatch</h3><p>Time anything</p></div>
                <div class="card app-card" onclick="openApp('pass')"><div class="app-icon">üîê</div><h3>Password</h3><p>Generate passwords</p></div>
                <div class="card app-card" onclick="openApp('ai')"><div class="app-icon">ü§ñ</div><h3>AI Chat</h3><p>Talk to AI</p></div>
            </div>
        </div>

        <div class="page" id="minigames-page">
            <div class="section-header"><h2>üïπÔ∏è <span>Mini Games</span></h2></div>
            <div class="grid">
                <div class="card app-card" onclick="openApp('ttt')"><div class="app-icon" style="background:linear-gradient(135deg,var(--primary),#e74c3c)">‚≠ï</div><h3>Tic Tac Toe</h3><p>Classic strategy</p></div>
                <div class="card app-card" onclick="openApp('mem')"><div class="app-icon" style="background:linear-gradient(135deg,var(--accent),#8e44ad)">üß†</div><h3>Memory</h3><p>Match pairs</p></div>
                <div class="card app-card" onclick="openApp('rx')"><div class="app-icon" style="background:linear-gradient(135deg,#2ecc71,#27ae60)">‚ö°</div><h3>Reaction</h3><p>Test reflexes</p></div>
            </div>
        </div>
    </div>

    <div class="modal" id="modal"><div class="modal-box"><button class="modal-close" onclick="closeModal()">√ó</button><div id="modal-body"></div></div></div>
    <audio id="music" loop src="https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3"></audio>

<script>
const G=[
{n:"Geometry Dash",d:"Rhythm platformer",u:"https://geometry-dash.bitbucket.io/",c:"Action"},
{n:"Slope",d:"3D runner",u:"https://slope3.com/",c:"Action"},
{n:"Subway Surfers",d:"Endless runner",u:"https://poki.com/en/g/subway-surfers",c:"Action"},
{n:"2048",d:"Number puzzle",u:"https://play2048.co/",c:"Puzzle"},
{n:"Snake",d:"Classic arcade",u:"https://googlesnake.gitlab.io/",c:"Arcade"},
{n:"Tetris",d:"Block puzzle",u:"https://www.edslap.com/amusements/Games/tetris/tetris.html",c:"Puzzle"},
{n:"Pac-Man",d:"Arcade classic",u:"https://www.google.com/doodles/30th-anniversary-of-pac-man",c:"Arcade"},
{n:"Minecraft",d:"Sandbox",u:"https://classic.minecraft.net/",c:"Sandbox"},
{n:"Run 3",d:"Space runner",u:"https://poki.com/en/g/run-3",c:"Action"},
{n:"Happy Wheels",d:"Ragdoll physics",u:"https://totaljerkface.com/happy_wheels.tjf",c:"Action"},
{n:"Chrome Dino",d:"Dino jump",u:"https://chromedino.com/",c:"Arcade"},
{n:"Shell Shockers",d:"Egg FPS",u:"https://www.crazygames.com/game/shellshockersio",c:"Shooter"},
{n:"Krunker.io",d:"Pixel FPS",u:"https://krunker.io/",c:"Shooter"},
{n:"Bullet Force",d:"FPS",u:"https://poki.com/en/g/bullet-force-multiplayer",c:"Shooter"},
{n:"Basketball Stars",d:"Basketball",u:"https://poki.com/en/g/basketball-stars",c:"Sports"},
{n:"Retro Bowl",d:"Football",u:"https://poki.com/en/g/retro-bowl",c:"Sports"},
{n:"Bloons TD",d:"Tower defense",u:"https://bloonstd.org/",c:"Strategy"},
{n:"Papa's Pizzeria",d:"Restaurant",u:"https://www.coolmathgames.com/0-papas-pizzeria",c:"Simulation"},
{n:"Cut the Rope",d:"Physics puzzle",u:"https://poki.com/en/g/cut-the-rope",c:"Puzzle"},
{n:"Moto X3M",d:"Bike racing",u:"https://poki.com/en/g/moto-x3m",c:"Racing"},
{n:"Drift Hunters",d:"Drift racing",u:"https://drift-hunters.co/",c:"Racing"},
{n:"Skribbl.io",d:"Drawing",u:"https://skribbl.io/",c:"Multiplayer"},
{n:"Agar.io",d:"Cell growth",u:"https://agar.io/",c:"Multiplayer"},
{n:"Slither.io",d:"Snake MP",u:"https://slither.io/",c:"Multiplayer"},
{n:"Super Mario",d:"Platformer",u:"https://supermariobros.io/",c:"Arcade"},
{n:"Sonic",d:"Speed platformer",u:"https://www.crazygames.com/game/sonic-the-hedgehog",c:"Arcade"},
{n:"1v1.LOL",d:"Build & shoot",u:"https://1v1.lol/",c:"Shooter"},
{n:"Zombs Royale",d:"Battle royale",u:"https://zombsroyale.io/",c:"Shooter"},
{n:"Venge.io",d:"MP FPS",u:"https://venge.io/",c:"Shooter"},
{n:"Football Legends",d:"Soccer",u:"https://poki.com/en/g/football-legends",c:"Sports"},
{n:"Fireboy Watergirl",d:"Coop puzzle",u:"https://fireboy-and-watergirl.io/",c:"Puzzle"},
{n:"Crossy Road",d:"Endless hopper",u:"https://poki.com/en/g/crossy-road",c:"Arcade"},
{n:"Stickman Hook",d:"Swinging",u:"https://poki.com/en/g/stickman-hook",c:"Action"},
{n:"Hill Climb Racing",d:"Hill driving",u:"https://poki.com/en/g/hill-climb-racing",c:"Racing"},
{n:"Drift Boss",d:"Drifting",u:"https://poki.com/en/g/drift-boss",c:"Racing"},
{n:"Hole.io",d:"Black hole",u:"https://poki.com/en/g/hole-io",c:"Arcade"},
{n:"Paper.io 2",d:"Territory",u:"https://poki.com/en/g/paper-io-2",c:"Multiplayer"},
{n:"Among Us",d:"Social deduction",u:"https://poki.com/en/g/among-us",c:"Multiplayer"},
{n:"FNAF",d:"Horror",u:"https://kevin.games/fnaf",c:"Horror"},
{n:"Temple Run",d:"Temple escape",u:"https://templerun.org/",c:"Action"},
{n:"Surviv.io",d:"Battle royale",u:"https://surviv.io/",c:"Shooter"},
{n:"Donkey Kong",d:"Arcade classic",u:"https://www.retrogames.cc/arcade-games/donkey-kong.html",c:"Arcade"},
{n:"Space Invaders",d:"Alien shooter",u:"https://www.retrogames.cc/arcade-games/space-invaders.html",c:"Arcade"},
{n:"Galaga",d:"Space shooter",u:"https://www.retrogames.cc/arcade-games/galaga.html",c:"Arcade"}
];

const cats=['All',...new Set(G.map(g=>g.c))].sort();
let favs=JSON.parse(localStorage.getItem('fav')||'[]'),activeF='All';

const esc=t=>{const d=document.createElement('div');d.textContent=t;return d.innerHTML};
const emoji=c=>({Action:'üèÉ',Puzzle:'üß©',Arcade:'üëæ',Shooter:'üî´',Racing:'üèéÔ∏è',Sports:'‚öΩ',Strategy:'‚ôüÔ∏è',Multiplayer:'üë•',Sandbox:'üèóÔ∏è',Simulation:'üé≠',Horror:'üëª'})[c]||'üéÆ';

function card(g){
    const f=favs.includes(g.n);
    return`<div class="card" data-c="${g.c}" data-n="${g.n.toLowerCase()}">
        <div class="card-head"><div class="card-icon">${emoji(g.c)}</div><button class="fav-btn ${f?'active':''}" onclick="event.stopPropagation();toggleFav('${esc(g.n)}',this)">${f?'‚òÖ':'‚òÜ'}</button></div>
        <h3>${esc(g.n)}</h3><p>${esc(g.d)}</p><span class="card-tag">${g.c}</span>
        <button class="play-btn" onclick="event.stopPropagation();play('${esc(g.u)}')">Play</button></div>`;
}

function load(){
    document.getElementById('featured').innerHTML=G.slice(0,4).map(card).join('');
    document.getElementById('games-grid').innerHTML=G.map(card).join('');
    document.getElementById('count').textContent=G.length+' games';
    document.getElementById('filters').innerHTML=cats.map(c=>`<button class="filter-btn ${c==='All'?'active':''}" onclick="setF('${c}')">${c}</button>`).join('');
}

function filter(){
    const s=document.getElementById('search').value.toLowerCase();
    document.querySelectorAll('#games-grid .card').forEach(c=>{
        const match=c.dataset.n.includes(s)&&(activeF==='All'||c.dataset.c===activeF);
        c.style.display=match?'':'none';
    });
}
function setF(c){activeF=c;document.querySelectorAll('.filter-btn').forEach(b=>b.classList.toggle('active',b.textContent===c));filter();}
function play(u){window.open(u,'_blank');}
function randomGame(){const g=G[Math.floor(Math.random()*G.length)];window.open(g.u,'_blank');}

function toggleFav(n,b){
    const i=favs.indexOf(n);
    if(i>-1){favs.splice(i,1);b.classList.remove('active');b.textContent='‚òÜ';}
    else{favs.push(n);b.classList.add('active');b.textContent='‚òÖ';}
    localStorage.setItem('fav',JSON.stringify(favs));
}

function showPage(p){
    document.querySelectorAll('.page').forEach(x=>x.classList.remove('active'));
    document.querySelectorAll('.nav-links a').forEach(a=>a.classList.remove('active'));
    document.getElementById(p+'-page').classList.add('active');
    document.getElementById(p+'-link')?.classList.add('active');
    if(p==='favorites')renderFavs();
}

function renderFavs(){
    const fg=G.filter(g=>favs.includes(g.n));
    document.getElementById('fav-grid').innerHTML=fg.map(card).join('');
    document.getElementById('no-fav').style.display=fg.length?'none':'block';
}

let playing=false;
function toggleMusic(){
    const m=document.getElementById('music'),b=document.getElementById('music-btn');
    if(playing){m.pause();b.classList.remove('playing');}
    else{m.volume=0.3;m.play();b.classList.add('playing');}
    playing=!playing;
}

function openModal(h){document.getElementById('modal-body').innerHTML=h;document.getElementById('modal').classList.add('active');}
function closeModal(){document.getElementById('modal').classList.remove('active');if(window.swInt)clearInterval(window.swInt);if(window.rxTo)clearTimeout(window.rxTo);}
document.getElementById('modal').onclick=e=>{if(e.target.id==='modal')closeModal();};
document.onkeydown=e=>{if(e.key==='Escape')closeModal();};

function openApp(a){({calc,note,todo,sw,pass,ai,ttt,mem,rx})[a]?.();}

let cD='0',cF=null,cO=null,cW=false;
function calc(){cD='0';cF=null;cO=null;cW=false;openModal(`<h2>üßÆ Calculator</h2><div class="calc-display" id="cD">0</div><div class="calc-grid">${['7','8','9','√∑','4','5','6','√ó','1','2','3','-','0','.','C','+'].map(b=>`<button class="calc-btn ${['√∑','√ó','-','+'].includes(b)?'op':''}" onclick="cP('${b}')">${b}</button>`).join('')}<button class="calc-btn eq" onclick="cP('=')">=</button></div>`);}
function cP(k){
    if(k>='0'&&k<='9'){if(cW){cD=k;cW=false;}else cD=cD==='0'?k:cD+k;}
    else if(k==='.'){if(!cD.includes('.'))cD+='.';}
    else if(k==='C'){cD='0';cF=null;cO=null;cW=false;}
    else if(['+','-','√ó','√∑'].includes(k)){const v=parseFloat(cD);if(cF!==null&&cO&&!cW){const r=cCalc(cF,v,cO);cD=String(r);cF=r;}else cF=v;cO=k;cW=true;}
    else if(k==='='&&cO&&cF!==null){cD=String(cCalc(cF,parseFloat(cD),cO));cF=null;cO=null;cW=false;}
    document.getElementById('cD').textContent=cD;
}
function cCalc(a,b,o){return o==='+'?a+b:o==='-'?a-b:o==='√ó'?a*b:o==='√∑'?(b?a/b:'Err'):b;}

function note(){openModal(`<h2>üìù Notepad</h2><textarea class="app-textarea" id="nt">${esc(localStorage.getItem('note')||'')}</textarea><button class="app-btn" onclick="localStorage.setItem('note',document.getElementById('nt').value);alert('Saved!')">üíæ Save</button>`);}

function todo(){openModal(`<h2>‚úÖ To-Do</h2><div class="todo-row"><input class="app-input" id="ti" placeholder="Add task..." style="margin:0"><button class="app-btn" onclick="addT()" style="width:auto;padding:14px 20px;margin:0">Add</button></div><div id="tl"></div>`);document.getElementById('ti').onkeypress=e=>{if(e.key==='Enter')addT();};rT();}
function rT(){const t=JSON.parse(localStorage.getItem('todos')||'[]');document.getElementById('tl').innerHTML=t.map((x,i)=>`<div class="todo-item ${x.d?'done':''}"><div class="todo-check ${x.d?'checked':''}" onclick="togT(${i})"></div><span>${esc(x.t)}</span><button class="todo-del" onclick="delT(${i})">√ó</button></div>`).join('');}
function addT(){const i=document.getElementById('ti'),v=i.value.trim();if(!v)return;const t=JSON.parse(localStorage.getItem('todos')||'[]');t.push({t:v,d:false});localStorage.setItem('todos',JSON.stringify(t));i.value='';rT();}
function togT(i){const t=JSON.parse(localStorage.getItem('todos')||'[]');t[i].d=!t[i].d;localStorage.setItem('todos',JSON.stringify(t));rT();}
function delT(i){const t=JSON.parse(localStorage.getItem('todos')||'[]');t.splice(i,1);localStorage.setItem('todos',JSON.stringify(t));rT();}

let swT=0;
function sw(){swT=0;openModal(`<h2>‚è±Ô∏è Stopwatch</h2><div class="sw-display" id="swD">00:00:00</div><div class="sw-btns"><button class="app-btn" id="swB" onclick="swS()">‚ñ∂ Start</button><button class="app-btn" onclick="swR()" style="background:rgba(255,107,53,0.3);color:var(--primary)">‚Ü∫ Reset</button></div>`);}
function swS(){const b=document.getElementById('swB');if(window.swInt){clearInterval(window.swInt);window.swInt=null;b.textContent='‚ñ∂ Start';}else{window.swInt=setInterval(()=>{swT+=10;document.getElementById('swD').textContent=fmtT(swT);},10);b.textContent='‚è∏ Pause';}}
function swR(){if(window.swInt){clearInterval(window.swInt);window.swInt=null;}swT=0;document.getElementById('swD').textContent='00:00:00';document.getElementById('swB').textContent='‚ñ∂ Start';}
function fmtT(ms){return`${String(Math.floor(ms/60000)).padStart(2,'0')}:${String(Math.floor((ms%60000)/1000)).padStart(2,'0')}:${String(Math.floor((ms%1000)/10)).padStart(2,'0')}`;}

function pass(){openModal(`<h2>üîê Password</h2><input type="number" class="app-input" id="pl" value="16" min="8" max="64"><div class="pass-display" id="pD">Click Generate</div><button class="app-btn" onclick="genP()">üé≤ Generate</button><button class="app-btn" onclick="navigator.clipboard.writeText(document.getElementById('pD').textContent)" style="background:rgba(155,93,229,0.3);color:var(--accent)">üìã Copy</button>`);}
function genP(){const l=Math.min(64,Math.max(8,+document.getElementById('pl').value||16)),c='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*';let p='';const a=new Uint32Array(l);crypto.getRandomValues(a);for(let i=0;i<l;i++)p+=c[a[i]%c.length];document.getElementById('pD').textContent=p;}

let ch=[];
function ai(){ch=[];openModal(`<h2>ü§ñ AI Chat</h2><div class="chat-box" id="cb"><div class="chat-msg ai">Hi! How can I help?</div></div><div class="chat-row"><input class="app-input" id="ai-in" placeholder="Message..." style="margin:0"><button class="app-btn" onclick="sendAI()" style="width:auto;padding:14px 20px;margin:0">Send</button></div>`);document.getElementById('ai-in').onkeypress=e=>{if(e.key==='Enter')sendAI();};}
async function sendAI(){const i=document.getElementById('ai-in'),b=document.getElementById('cb'),m=i.value.trim();if(!m)return;b.innerHTML+=`<div class="chat-msg user">${esc(m)}</div>`;i.value='';b.scrollTop=b.scrollHeight;ch.push({role:'user',content:m});const lid='l'+Date.now();b.innerHTML+=`<div class="chat-msg ai" id="${lid}">...</div>`;b.scrollTop=b.scrollHeight;try{const r=await fetch('https://api.anthropic.com/v1/messages',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:1000,messages:ch})});const d=await r.json(),reply=d.content?.[0]?.text||'Error';ch.push({role:'assistant',content:reply});document.getElementById(lid).textContent=reply;}catch(e){document.getElementById(lid).textContent='Error';ch.pop();}b.scrollTop=b.scrollHeight;}

let tB,tT,tO;
function ttt(){tB=Array(9).fill(null);tT='X';tO=false;openModal(`<h2>‚≠ï Tic Tac Toe</h2><div class="game-status" id="tS">Your turn (X)</div><div class="ttt-board">${Array(9).fill(0).map((_,i)=>`<div class="ttt-cell" onclick="tM(${i})"></div>`).join('')}</div><button class="app-btn" onclick="ttt()">üîÑ New</button>`);}
function tM(i){if(tB[i]||tO)return;tB[i]=tT;const cells=document.querySelectorAll('.ttt-cell');cells[i].textContent=tT;cells[i].classList.add(tT.toLowerCase(),'taken');const w=tW();if(w){document.getElementById('tS').textContent=w==='Draw'?"Draw!":w+' Wins!';tO=true;return;}tT=tT==='X'?'O':'X';document.getElementById('tS').textContent=tT==='X'?'Your turn (X)':"AI's turn (O)";if(tT==='O')setTimeout(tAI,400);}
function tAI(){const e=tB.map((v,i)=>v===null?i:null).filter(v=>v!==null);if(!e.length)return;tM(e[Math.floor(Math.random()*e.length)]);}
function tW(){const l=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const[a,b,c]of l)if(tB[a]&&tB[a]===tB[b]&&tB[a]===tB[c])return tB[a];return tB.every(x=>x)?'Draw':null;}

const mE=['üéÆ','üé≤','üéØ','üèÜ','‚ö°','üî•','üíé','üåü'];let mC,mF,mM,mL;
function mem(){mC=[...mE,...mE].sort(()=>Math.random()-0.5);mF=[];mM=[];mL=false;openModal(`<h2>üß† Memory</h2><div class="game-status" id="mS">Matches: 0/8</div><div class="mem-board">${mC.map((e,i)=>`<div class="mem-card" onclick="mFlip(${i})"><span>${e}</span></div>`).join('')}</div><button class="app-btn" onclick="mem()">üîÑ New</button>`);}
function mFlip(i){if(mL||mF.includes(i)||mM.includes(i))return;const cards=document.querySelectorAll('.mem-card');cards[i].classList.add('flip');mF.push(i);if(mF.length===2){mL=true;const[a,b]=mF;if(mC[a]===mC[b]){mM.push(a,b);cards[a].classList.add('match');cards[b].classList.add('match');mF=[];mL=false;document.getElementById('mS').textContent=`Matches: ${mM.length/2}/8`;if(mM.length===16)document.getElementById('mS').textContent='üéâ You Won!';}else setTimeout(()=>{cards[a].classList.remove('flip');cards[b].classList.remove('flip');mF=[];mL=false;},800);}}

let rxS,rxSt,rxTs;
function rx(){rxS='wait';rxTs=JSON.parse(localStorage.getItem('rxT')||'[]');const best=rxTs.length?Math.min(...rxTs):'-',avg=rxTs.length?Math.round(rxTs.reduce((a,b)=>a+b,0)/rxTs.length):'-';openModal(`<h2>‚ö° Reaction</h2><div class="rx-box wait" id="rxB" onclick="rxC()">Click to Start</div><div class="rx-stats"><div class="rx-stat"><div class="rx-val" id="rxL">-</div><div class="rx-lbl">Last</div></div><div class="rx-stat"><div class="rx-val" id="rxBe">${best==='-'?'-':best+'ms'}</div><div class="rx-lbl">Best</div></div><div class="rx-stat"><div class="rx-val" id="rxAv">${avg==='-'?'-':avg+'ms'}</div><div class="rx-lbl">Avg</div></div></div>`);}
function rxC(){const b=document.getElementById('rxB');if(rxS==='wait'){rxS='ready';b.className='rx-box ready';b.textContent='Wait...';window.rxTo=setTimeout(()=>{rxS='go';rxSt=Date.now();b.className='rx-box go';b.textContent='CLICK!';},1000+Math.random()*3000);}else if(rxS==='ready'){clearTimeout(window.rxTo);rxS='wait';b.className='rx-box wait';b.textContent='Too early! Try again';}else if(rxS==='go'){const t=Date.now()-rxSt;rxTs.push(t);if(rxTs.length>10)rxTs.shift();localStorage.setItem('rxT',JSON.stringify(rxTs));rxS='wait';b.className='rx-box wait';b.textContent=t+'ms - Click again';document.getElementById('rxL').textContent=t+'ms';document.getElementById('rxBe').textContent=Math.min(...rxTs)+'ms';document.getElementById('rxAv').textContent=Math.round(rxTs.reduce((a,b)=>a+b,0)/rxTs.length)+'ms';}}

load();

// Create floating dots
(function(){
    const c=document.getElementById('dots');
    for(let i=0;i<30;i++){
        const d=document.createElement('div');
        d.className='dot';
        const s=Math.random()*4+2;
        d.style.width=s+'px';
        d.style.height=s+'px';
        d.style.left=Math.random()*100+'%';
        d.style.animationDuration=(Math.random()*10+15)+'s';
        d.style.animationDelay=Math.random()*5+'s';
        c.appendChild(d);
    }
})();
</script>
</body>
</html>
