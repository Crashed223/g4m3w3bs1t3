<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Hub</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéÆ</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
            transition: background 0.5s ease, color 0.5s ease;
            cursor: none;
        }

        /* Custom Cursor */
        .cursor {
            width: 20px;
            height: 20px;
            border: 2px solid white;
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.15s ease;
            mix-blend-mode: difference;
        }

        .cursor-trail {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9998;
            opacity: 0.5;
            transition: transform 0.1s ease;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader {
            width: 80px;
            height: 80px;
            border: 8px solid rgba(255, 255, 255, 0.2);
            border-top: 8px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            margin-top: 30px;
            font-size: 24px;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        body.dark-theme {
            background: linear-gradient(135deg, #1a237e 0%, #000000 100%);
        }

        body.light-theme {
            background: linear-gradient(135deg, #e3f2fd 0%, #ffffff 100%);
            color: #333;
        }

        body.light-theme .loading-screen {
            background: linear-gradient(135deg, #e3f2fd 0%, #ffffff 100%);
        }

        body.light-theme .loader {
            border-color: rgba(0, 0, 0, 0.2);
            border-top-color: #333;
        }

        body.light-theme .loading-text {
            color: #333;
        }

        .dots-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            display: block;
        }

        .dot {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.3;
            animation: float linear infinite;
            transition: background 0.3s ease;
        }

        body.light-theme .dot {
            background: #333;
            opacity: 0.2;
        }

        @keyframes float {
            0% { transform: translateY(100vh) translateX(0); }
            100% { transform: translateY(-100px) translateX(50px); }
        }

        nav {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 100;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(45deg, #fff, #a8edea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        body.light-theme .logo {
            background: linear-gradient(45deg, #333, #667eea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            gap: 30px;
            list-style: none;
        }

        .nav-links li {
            position: relative;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-size: 18px;
            padding: 10px 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: block;
            cursor: pointer;
        }

        body.light-theme .nav-links a {
            color: #333;
        }

        .nav-links a:hover, .nav-links a.active {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            min-width: 300px;
            border-radius: 12px;
            padding: 20px;
            margin-top: 10px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            z-index: 1000;
        }

        .dropdown-content.show {
            display: block;
        }

        .theme-selector {
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .theme-selector h3, .feedback-form h3 {
            margin-bottom: 15px;
            color: #a8edea;
        }

        .theme-selector select, .feedback-form textarea {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
            font-family: inherit;
        }

        .feedback-form textarea {
            padding: 12px;
            resize: vertical;
            min-height: 100px;
        }

        .submit-btn {
            margin-top: 15px;
            padding: 10px 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .container {
            max-width: 1200px;
            margin: 60px auto;
            padding: 0 40px;
            position: relative;
            z-index: 1;
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        h1 {
            font-size: 48px;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            text-align: center;
            font-size: 20px;
            margin-bottom: 40px;
            opacity: 0.9;
        }

        .game-grid, .app-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .game-card, .app-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 30px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .game-card::before, .app-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
        }

        .game-card:hover::before, .app-card:hover::before {
            left: 100%;
        }

        .game-card:hover, .app-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.4), 0 0 20px rgba(168, 237, 234, 0.3);
            border-color: rgba(168, 237, 234, 0.5);
        }

        .game-card.favorite::after {
            content: '‚≠ê';
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .game-card h2, .app-card h2 {
            font-size: 24px;
            margin-bottom: 15px;
            color: #a8edea;
        }

        .game-card p, .app-card p {
            font-size: 16px;
            opacity: 0.9;
            line-height: 1.6;
        }

        .play-btn {
            margin-top: 20px;
            padding: 12px 30px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .play-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
        }

        .search-box {
            width: 100%;
            max-width: 600px;
            margin: 0 auto 40px;
            padding: 15px 20px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            color: white;
            font-size: 16px;
            font-family: inherit;
            display: block;
        }

        .search-box::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        body.light-theme .search-box {
            color: #333;
            background: rgba(0, 0, 0, 0.05);
        }

        .app-icon {
            font-size: 64px;
            text-align: center;
            margin-bottom: 20px;
        }

        .action-btn {
            padding: 16px 40px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-4px);
        }

        .action-btn.primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
        }

        /* App Modal */
        .app-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .app-modal.active {
            display: flex;
        }

        .app-modal-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        body.dark-theme .app-modal-content {
            background: linear-gradient(135deg, #1a237e 0%, #000000 100%);
        }

        body.light-theme .app-modal-content {
            background: linear-gradient(135deg, #e3f2fd 0%, #ffffff 100%);
        }

        .close-app {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 32px;
            cursor: pointer;
            color: white;
            background: rgba(255, 255, 255, 0.2);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-app:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        body.light-theme .close-app {
            color: #333;
        }

        .app-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            font-size: 36px;
            text-align: center;
            font-weight: bold;
            min-height: 60px;
        }

        .app-input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
        }

        body.light-theme .app-input {
            color: #333;
            background: rgba(255, 255, 255, 0.8);
        }

        .app-textarea {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            min-height: 200px;
            resize: vertical;
        }

        body.light-theme .app-textarea {
            color: #333;
            background: rgba(255, 255, 255, 0.8);
        }

        .app-button {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            cursor: pointer;
        }

        .calc-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .calc-btn {
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }

        .calc-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        body.light-theme .calc-btn {
            color: #333;
        }

        .chat-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            height: 400px;
            overflow-y: auto;
            margin: 20px 0;
        }

        .chat-message {
            margin: 10px 0;
            padding: 10px 15px;
            border-radius: 12px;
            max-width: 80%;
        }

        .user-msg {
            background: linear-gradient(45deg, #667eea, #764ba2);
            margin-left: auto;
            text-align: right;
        }

        .ai-msg {
            background: rgba(255, 255, 255, 0.1);
            margin-right: auto;
        }

        .chat-input-container {
            display: flex;
            gap: 10px;
        }

        .chat-input-container input {
            flex: 1;
        }

        .chat-input-container button {
            width: auto;
            padding: 15px 30px;
        }

        /* Mobile responsiveness fix */
        @media (max-width: 768px) {
            body {
                cursor: auto;
            }
            .cursor, .cursor-trail {
                display: none;
            }
            nav {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
            }
            .nav-links {
                gap: 10px;
                flex-wrap: wrap;
                justify-content: center;
            }
            .nav-links a {
                padding: 8px 12px;
                font-size: 14px;
            }
            h1 {
                font-size: 32px;
            }
            .container {
                padding: 0 20px;
                margin: 30px auto;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loading-screen">
        <div class="loader"></div>
        <div class="loading-text">Loading GameHub...</div>
    </div>

    <!-- Custom Cursor -->
    <div class="cursor" id="cursor"></div>
    <div class="cursor-trail" id="cursor-trail"></div>

    <div class="dots-container" id="dots-container"></div>

    <nav>
        <div class="logo">GameHub</div>
        <ul class="nav-links">
            <li><a onclick="showPage('home')" id="home-link" class="active">Home</a></li>
            <li><a onclick="showPage('games')" id="games-link">Games</a></li>
            <li><a onclick="showPage('apps')" id="apps-link">Apps</a></li>
            <li>
                <a id="settings-link">Settings</a>
                <div class="dropdown-content" id="settings-dropdown">
                    <div class="theme-selector">
                        <h3>Theme</h3>
                        <select id="theme-select" onchange="changeTheme()">
                            <option value="original">Original (Purple)</option>
                            <option value="dark">Dark (Blue to Black)</option>
                            <option value="light">Light (Blue to White)</option>
                        </select>
                    </div>
                    <div class="feedback-form">
                        <h3>Send Feedback</h3>
                        <textarea id="feedback-text" placeholder="Share your thoughts..."></textarea>
                        <button class="submit-btn" onclick="submitFeedback()">Submit</button>
                    </div>
                </div>
            </li>
        </ul>
    </nav>

    <div class="container">
        <!-- Home Page -->
        <div class="page-section active" id="home-page">
            <h1>Welcome to GameHub</h1>
            <p class="subtitle">Your ultimate destination for awesome games</p>
            
            <div style="margin: 60px 0;">
                <h2 style="font-size: 32px; text-align: center; margin-bottom: 30px; color: #a8edea;">Featured Games</h2>
                <div class="game-grid" id="featured-grid">
                    <!-- Featured games will be loaded by JavaScript -->
                </div>
            </div>

            <div style="text-align: center; margin: 40px 0;">
                <button class="action-btn primary" onclick="showPage('games')">Browse Games</button>
                <button class="action-btn" onclick="showPage('apps')">Browse Apps</button>
            </div>
        </div>

        <!-- Games Page -->
        <div class="page-section" id="games-page">
            <h1>All Games (<span id="game-count">0</span> Total)</h1>
            <p class="subtitle">Choose your adventure</p>
            <input type="text" class="search-box" id="game-search" placeholder="üîç Search games..." onkeyup="searchGames()">
            <div class="game-grid" id="game-grid">
                <!-- Games will be loaded by JavaScript -->
            </div>
        </div>

        <!-- Apps Page -->
        <div class="page-section" id="apps-page">
            <h1>Apps</h1>
            <p class="subtitle">Useful tools</p>
            <div class="app-grid">
                <div class="app-card" onclick="openApp('calc')">
                    <div class="app-icon">üßÆ</div>
                    <h2>Calculator</h2>
                    <p>Perform math calculations</p>
                </div>
                <div class="app-card" onclick="openApp('notepad')">
                    <div class="app-icon">üìù</div>
                    <h2>Notepad</h2>
                    <p>Write and save notes</p>
                </div>
                <div class="app-card" onclick="openApp('password')">
                    <div class="app-icon">üîê</div>
                    <h2>Password Generator</h2>
                    <p>Create secure passwords</p>
                </div>
                <div class="app-card" onclick="openApp('ai')">
                    <div class="app-icon">ü§ñ</div>
                    <h2>AI Assistant</h2>
                    <p>Chat with a mini AI helper</p>
                </div>
            </div>
        </div>
    </div>

    <!-- App Modal -->
    <div class="app-modal" id="app-modal">
        <div class="app-modal-content">
            <span class="close-app" onclick="closeApp()">√ó</span>
            <div id="app-content"></div>
        </div>
    </div>

    <script>
        // All game data
        const games = [
            {name: "Geometry Dash", desc: "Rhythm-based platformer", url: "https://geometry-dash.bitbucket.io/"},
            {name: "Slope", desc: "Fast 3D runner", url: "https://slope3.com/"},
            {name: "Subway Surfers", desc: "Endless subway runner", url: "https://poki.com/en/g/subway-surfers"},
            {name: "Temple Run", desc: "Ancient temple escape", url: "https://templerun.org/"},
            {name: "2048", desc: "Number puzzle game", url: "https://play2048.co/"},
            {name: "Snake", desc: "Classic arcade game", url: "https://googlesnake.gitlab.io/"},
            {name: "Tetris", desc: "Block puzzle game", url: "https://www.edslap.com/amusements/Games/tetris/tetris.html"},
            {name: "Pac-Man", desc: "Arcade classic", url: "https://www.google.com/doodles/30th-anniversary-of-pac-man"},
            {name: "Minecraft Classic", desc: "Sandbox building", url: "https://classic.minecraft.net/"},
            {name: "Run 3", desc: "Space tunnel runner", url: "https://poki.com/en/g/run-3"},
            {name: "Happy Wheels", desc: "Ragdoll physics", url: "https://totaljerkface.com/happy_wheels.tjf"},
            {name: "Chrome Dino", desc: "Dinosaur jumping", url: "https://chromedino.com/"},
            {name: "Shell Shockers", desc: "Egg FPS shooter", url: "https://www.crazygames.com/game/shellshockersio"},
            {name: "Krunker.io", desc: "Pixelated FPS", url: "https://krunker.io/"},
            {name: "Bullet Force", desc: "Realistic FPS", url: "https://poki.com/en/g/bullet-force-multiplayer"},
            {name: "Basketball Stars", desc: "Basketball game", url: "https://poki.com/en/g/basketball-stars"},
            {name: "Retro Bowl", desc: "Football manager", url: "https://poki.com/en/g/retro-bowl"},
            {name: "Bloons TD 5", desc: "Tower defense", url: "https://bloonstd.org/"},
            {name: "Papa's Pizzeria", desc: "Restaurant game", url: "https://www.coolmathgames.com/0-papas-pizzeria"},
            {name: "Cut the Rope", desc: "Physics puzzle", url: "https://poki.com/en/g/cut-the-rope"},
            {name: "Moto X3M", desc: "Bike racing", url: "https://poki.com/en/g/moto-x3m"},
            {name: "Drift Hunters", desc: "Drift racing", url: "https://drift-hunters.co/"},
            {name: "Skribbl.io", desc: "Drawing game", url: "https://skribbl.io/"},
            {name: "Agar.io", desc: "Cell growth", url: "https://agar.io/"},
            {name: "Slither.io", desc: "Snake multiplayer", url: "https://slither.io/"},
            {name: "Duck Hunt", desc: "Shooting classic", url: "https://duckhuntjs.com/"},
            {name: "Super Mario", desc: "Platform classic", url: "https://supermariobros.io/"},
            {name: "Sonic", desc: "Speed platformer", url: "https://www.crazygames.com/game/sonic-the-hedgehog"},
            {name: "1v1.LOL", desc: "Building shooter", url: "https://1v1.lol/"},
            {name: "Zombs Royale", desc: "2D battle royale", url: "https://zombsroyale.io/"},
            {name: "Venge.io", desc: "Multiplayer FPS", url: "https://venge.io/"},
            {name: "Football Legends", desc: "Soccer game", url: "https://poki.com/en/g/football-legends"},
            {name: "Basketball Legends", desc: "Basketball arcade", url: "https://poki.com/en/g/basketball-legends"},
            {name: "Soccer Random", desc: "Ragdoll soccer", url: "https://poki.com/en/g/soccer-random"},
            {name: "Penalty Kick Online", desc: "Penalty shooter", url: "https://poki.com/en/g/penalty-kick-online"},
            {name: "Fireboy and Watergirl", desc: "Coop puzzle", url: "https://fireboy-and-watergirl.io/"},
            {name: "Red Ball 4", desc: "Platform puzzle", url: "https://poki.com/en/g/red-ball-4"},
            {name: "Crossy Road", desc: "Endless hopper", url: "https://poki.com/en/g/crossy-road"},
            {name: "Stickman Hook", desc: "Physics swinger", url: "https://poki.com/en/g/stickman-hook"},
            {name: "Hill Climb Racing", desc: "Hill driving", url: "https://poki.com/en/g/hill-climb-racing"},
            {name: "Traffic Rider", desc: "Motorcycle racing", url: "https://poki.com/en/g/traffic-rider"},
            {name: "Drift Boss", desc: "Endless drifting", url: "https://poki.com/en/g/drift-boss"},
            {name: "Hole.io", desc: "Black hole game", url: "https://poki.com/en/g/hole-io"},
            {name: "Paper.io 2", desc: "Territory conquest", url: "https://poki.com/en/g/paper-io-2"},
            {name: "Zombs.io", desc: "Zombie survival", url: "https://zombs.io/"},
            {name: "Surviv.io", desc: "2D battle royale", url: "https://surviv.io/"},
            {name: "Donkey Kong", desc: "Arcade classic", url: "https://www.retrogames.cc/arcade-games/donkey-kong.html"},
            {name: "Galaga", desc: "Space shooter", url: "https://www.retrogames.cc/arcade-games/galaga.html"},
            {name: "Space Invaders", desc: "Alien shooter", url: "https://www.retrogames.cc/arcade-games/space-invaders.html"},
            {name: "Asteroids", desc: "Space rocks", url: "https://www.retrogames.cc/arcade-games/asteroids.html"},
            {name: "Among Us", desc: "Social deduction", url: "https://poki.com/en/g/among-us"},
            {name: "Five Nights at Freddy's", desc: "Horror survival", url: "https://kevin.games/fnaf"},
            {name: "Stickman Games", desc: "Stickman collection", url: "https://poki.com/en/stickman"},
            {name: "Pixel Gun 3D", desc: "Block FPS", url: "https://poki.com/en/g/pixel-gun-apocalypse-3"}
        ];

        // Featured games (first 4)
        const featuredGames = games.slice(0, 4);

        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Load featured games on home page
        function loadFeaturedGames() {
            const grid = document.getElementById('featured-grid');
            grid.innerHTML = featuredGames.map(g => `
                <div class="game-card">
                    <h2>${escapeHtml(g.name)}</h2>
                    <p>${escapeHtml(g.desc)}</p>
                    <button class="play-btn" onclick="event.stopPropagation(); window.open('${escapeHtml(g.url)}', '_blank')">Play Now</button>
                </div>
            `).join('');
        }

        // Load games
        function loadGames() {
            const grid = document.getElementById('game-grid');
            document.getElementById('game-count').textContent = games.length;
            grid.innerHTML = games.map(g => `
                <div class="game-card">
                    <h2>${escapeHtml(g.name)}</h2>
                    <p>${escapeHtml(g.desc)}</p>
                    <button class="play-btn" onclick="event.stopPropagation(); window.open('${escapeHtml(g.url)}', '_blank')">Play Now</button>
                </div>
            `).join('');
        }

        // Search games
        function searchGames() {
            const search = document.getElementById('game-search').value.toLowerCase();
            const cards = document.querySelectorAll('#game-grid .game-card');
            cards.forEach(card => {
                const text = card.textContent.toLowerCase();
                card.style.display = text.includes(search) ? 'block' : 'none';
            });
        }

        // Page navigation
        function showPage(page) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
            document.getElementById(page + '-page').classList.add('active');
            document.getElementById(page + '-link').classList.add('active');
            window.scrollTo(0, 0);
        }

        // Theme
        function changeTheme() {
            const theme = document.getElementById('theme-select').value;
            document.body.className = theme === 'original' ? '' : theme + '-theme';
            try { 
                localStorage.setItem('theme', theme); 
            } catch(e) {
                console.warn('localStorage not available');
            }
        }

        // Feedback
        function submitFeedback() {
            const text = document.getElementById('feedback-text').value;
            if (text.trim()) {
                alert('Thank you for your feedback!');
                document.getElementById('feedback-text').value = '';
            } else {
                alert('Please enter some feedback before submitting.');
            }
        }

        // Create dots
        function createDots() {
            const container = document.getElementById('dots-container');
            for (let i = 0; i < 50; i++) {
                const dot = document.createElement('div');
                dot.className = 'dot';
                const size = Math.random() * 4 + 2;
                dot.style.width = size + 'px';
                dot.style.height = size + 'px';
                dot.style.left = Math.random() * 100 + '%';
                dot.style.animationDuration = (Math.random() * 10 + 15) + 's';
                dot.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(dot);
            }
        }

        // Custom cursor implementation
        function initCursor() {
            const cursor = document.getElementById('cursor');
            const trail = document.getElementById('cursor-trail');
            
            // Check if it's a touch device
            if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
                cursor.style.display = 'none';
                trail.style.display = 'none';
                document.body.style.cursor = 'auto';
                return;
            }

            let mouseX = 0, mouseY = 0;
            let trailX = 0, trailY = 0;

            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
                cursor.style.left = mouseX - 10 + 'px';
                cursor.style.top = mouseY - 10 + 'px';
            });

            // Smooth trail animation
            function animateTrail() {
                trailX += (mouseX - trailX) * 0.2;
                trailY += (mouseY - trailY) * 0.2;
                trail.style.left = trailX - 4 + 'px';
                trail.style.top = trailY - 4 + 'px';
                requestAnimationFrame(animateTrail);
            }
            animateTrail();

            // Cursor effects on hover
            document.querySelectorAll('a, button, .game-card, .app-card, .calc-btn, select, textarea, input').forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursor.style.transform = 'scale(1.5)';
                });
                el.addEventListener('mouseleave', () => {
                    cursor.style.transform = 'scale(1)';
                });
            });
        }

        // Loading screen
        function hideLoadingScreen() {
            const loadingScreen = document.getElementById('loading-screen');
            loadingScreen.classList.add('hidden');
            setTimeout(() => {
                loadingScreen.style.display = 'none';
            }, 500);
        }

        // Settings dropdown
        document.getElementById('settings-link').addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            document.getElementById('settings-dropdown').classList.toggle('show');
        });

        document.addEventListener('click', (e) => {
            const settings = document.getElementById('settings-link');
            const dropdown = document.getElementById('settings-dropdown');
            if (!settings.contains(e.target) && !dropdown.contains(e.target)) {
                dropdown.classList.remove('show');
            }
        });

        // Initialize
        window.addEventListener('load', () => {
            createDots();
            loadFeaturedGames();
            loadGames();
            initCursor();
            
            try {
                const saved = localStorage.getItem('theme');
                if (saved) {
                    document.getElementById('theme-select').value = saved;
                    changeTheme();
                }
            } catch(e) {
                console.warn('localStorage not available');
            }

            // Hide loading screen after everything is ready
            setTimeout(hideLoadingScreen, 800);
        });

        // App functions
        let calcDisplay = '0';
        let calcFirstOperand = null;
        let calcOperator = null;
        let calcWaitingForSecondOperand = false;

        function openApp(app) {
            const modal = document.getElementById('app-modal');
            const content = document.getElementById('app-content');
            modal.classList.add('active');

            if (app === 'calc') {
                calcDisplay = '0';
                calcFirstOperand = null;
                calcOperator = null;
                calcWaitingForSecondOperand = false;
                
                content.innerHTML = `
                    <h2>Calculator</h2>
                    <div class="app-display" id="calc-display">0</div>
                    <div class="calc-grid">
                        <button class="calc-btn" onclick="calcDigit('7')">7</button>
                        <button class="calc-btn" onclick="calcDigit('8')">8</button>
                        <button class="calc-btn" onclick="calcDigit('9')">9</button>
                        <button class="calc-btn" onclick="calcOperation('/')">√∑</button>
                        <button class="calc-btn" onclick="calcDigit('4')">4</button>
                        <button class="calc-btn" onclick="calcDigit('5')">5</button>
                        <button class="calc-btn" onclick="calcDigit('6')">6</button>
                        <button class="calc-btn" onclick="calcOperation('*')">√ó</button>
                        <button class="calc-btn" onclick="calcDigit('1')">1</button>
                        <button class="calc-btn" onclick="calcDigit('2')">2</button>
                        <button class="calc-btn" onclick="calcDigit('3')">3</button>
                        <button class="calc-btn" onclick="calcOperation('-')">-</button>
                        <button class="calc-btn" onclick="calcDigit('0')">0</button>
                        <button class="calc-btn" onclick="calcDecimal()">.</button>
                        <button class="calc-btn" onclick="calcClear()">C</button>
                        <button class="calc-btn" onclick="calcOperation('+')">+</button>
                        <button class="calc-btn" onclick="calcEquals()" style="grid-column: span 4; background: linear-gradient(45deg, #667eea, #764ba2);">=</button>
                    </div>
                `;
            } else if (app === 'notepad') {
                let note = '';
                try {
                    note = localStorage.getItem('note') || '';
                } catch(e) {
                    console.warn('localStorage not available');
                }
                content.innerHTML = `
                    <h2>Notepad</h2>
                    <textarea class="app-textarea" id="note-text" placeholder="Type your notes...">${escapeHtml(note)}</textarea>
                    <button class="app-button" onclick="saveNote()">Save Note</button>
                `;
            } else if (app === 'password') {
                content.innerHTML = `
                    <h2>Password Generator</h2>
                    <input type="number" class="app-input" id="pass-len" value="16" min="4" max="50" placeholder="Length">
                    <div class="app-display" id="pass-display" style="font-size: 20px; word-break: break-all;">Click Generate</div>
                    <button class="app-button" onclick="genPass()">Generate Password</button>
                    <button class="app-button" onclick="copyPass()">Copy to Clipboard</button>
                `;
            } else if (app === 'ai') {
                content.innerHTML = `
                    <h2>AI Assistant</h2>
                    <div class="chat-box" id="chat-box">
                        <div class="chat-message ai-msg">Hi! I'm your AI assistant. Ask me anything!</div>
                    </div>
                    <div class="chat-input-container">
                        <input type="text" class="app-input" id="ai-input" placeholder="Type your message..." style="margin: 0;">
                        <button class="app-button" onclick="sendAI()" style="margin: 0;">Send</button>
                    </div>
                `;
                document.getElementById('ai-input').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') sendAI();
                });
            }

            // Re-initialize cursor hover effects for new elements
            setTimeout(() => {
                document.querySelectorAll('.calc-btn, .app-button, .app-input, .app-textarea').forEach(el => {
                    el.addEventListener('mouseenter', () => {
                        document.getElementById('cursor').style.transform = 'scale(1.5)';
                    });
                    el.addEventListener('mouseleave', () => {
                        document.getElementById('cursor').style.transform = 'scale(1)';
                    });
                });
            }, 100);
        }

        function closeApp() {
            document.getElementById('app-modal').classList.remove('active');
        }

        // Close modal when clicking outside
        document.getElementById('app-modal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('app-modal')) {
                closeApp();
            }
        });

        // Safe calculator functions (no eval)
        function updateCalcDisplay() {
            document.getElementById('calc-display').textContent = calcDisplay;
        }

        function calcDigit(digit) {
            if (calcWaitingForSecondOperand) {
                calcDisplay = digit;
                calcWaitingForSecondOperand = false;
            } else {
                calcDisplay = calcDisplay === '0' ? digit : calcDisplay + digit;
            }
            updateCalcDisplay();
        }

        function calcDecimal() {
            if (calcWaitingForSecondOperand) {
                calcDisplay = '0.';
                calcWaitingForSecondOperand = false;
                updateCalcDisplay();
                return;
            }
            if (!calcDisplay.includes('.')) {
                calcDisplay += '.';
            }
            updateCalcDisplay();
        }

        function calcClear() {
            calcDisplay = '0';
            calcFirstOperand = null;
            calcOperator = null;
            calcWaitingForSecondOperand = false;
            updateCalcDisplay();
        }

        function calcOperation(op) {
            const inputValue = parseFloat(calcDisplay);

            if (calcFirstOperand === null) {
                calcFirstOperand = inputValue;
            } else if (calcOperator) {
                const result = performCalculation(calcFirstOperand, inputValue, calcOperator);
                calcDisplay = String(result);
                calcFirstOperand = result;
                updateCalcDisplay();
            }

            calcWaitingForSecondOperand = true;
            calcOperator = op;
        }

        function performCalculation(first, second, op) {
            switch(op) {
                case '+': return first + second;
                case '-': return first - second;
                case '*': return first * second;
                case '/': return second !== 0 ? first / second : 'Error';
                default: return second;
            }
        }

        function calcEquals() {
            if (calcOperator === null || calcWaitingForSecondOperand) {
                return;
            }

            const inputValue = parseFloat(calcDisplay);
            const result = performCalculation(calcFirstOperand, inputValue, calcOperator);
            
            calcDisplay = String(result);
            calcFirstOperand = null;
            calcOperator = null;
            calcWaitingForSecondOperand = false;
            updateCalcDisplay();
        }

        function saveNote() {
            const note = document.getElementById('note-text').value;
            try {
                localStorage.setItem('note', note);
                alert('Note saved!');
            } catch(e) {
                alert('Could not save note. localStorage may be unavailable.');
            }
        }

        function genPass() {
            const len = parseInt(document.getElementById('pass-len').value) || 16;
            const clampedLen = Math.min(Math.max(len, 4), 50);
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+-=';
            let pass = '';
            
            // Use crypto API for better randomness if available
            if (window.crypto && window.crypto.getRandomValues) {
                const array = new Uint32Array(clampedLen);
                window.crypto.getRandomValues(array);
                for (let i = 0; i < clampedLen; i++) {
                    pass += chars.charAt(array[i] % chars.length);
                }
            } else {
                for (let i = 0; i < clampedLen; i++) {
                    pass += chars.charAt(Math.floor(Math.random() * chars.length));
                }
            }
            document.getElementById('pass-display').textContent = pass;
        }

        function copyPass() {
            const pass = document.getElementById('pass-display').textContent;
            if (pass !== 'Click Generate') {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(pass).then(() => {
                        alert('Password copied!');
                    }).catch(() => {
                        fallbackCopy(pass);
                    });
                } else {
                    fallbackCopy(pass);
                }
            }
        }

        function fallbackCopy(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                alert('Password copied!');
            } catch(e) {
                alert('Could not copy password. Please copy manually.');
            }
            document.body.removeChild(textarea);
        }

        // AI chat conversation history
        let chatHistory = [];

        async function sendAI() {
            const input = document.getElementById('ai-input');
            const chatBox = document.getElementById('chat-box');
            const msg = input.value.trim();
            
            if (!msg) return;
            
            // Add user message (escaped)
            chatBox.innerHTML += `<div class="chat-message user-msg">${escapeHtml(msg)}</div>`;
            input.value = '';
            chatBox.scrollTop = chatBox.scrollHeight;
            
            // Add to history
            chatHistory.push({ role: 'user', content: msg });
            
            // Add loading message
            const loadingId = 'ai-loading-' + Date.now();
            chatBox.innerHTML += `<div class="chat-message ai-msg" id="${loadingId}">Thinking...</div>`;
            chatBox.scrollTop = chatBox.scrollHeight;
            
            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1000,
                        messages: chatHistory
                    })
                });
                
                const data = await response.json();
                
                if (data.content && data.content[0] && data.content[0].text) {
                    const aiReply = data.content[0].text;
                    
                    // Add to history
                    chatHistory.push({ role: 'assistant', content: aiReply });
                    
                    // Remove loading and add AI response (escaped)
                    const loadingEl = document.getElementById(loadingId);
                    if (loadingEl) loadingEl.remove();
                    chatBox.innerHTML += `<div class="chat-message ai-msg">${escapeHtml(aiReply)}</div>`;
                } else {
                    throw new Error('Invalid response format');
                }
                chatBox.scrollTop = chatBox.scrollHeight;
            } catch (error) {
                const loadingEl = document.getElementById(loadingId);
                if (loadingEl) {
                    loadingEl.textContent = 'Sorry, I encountered an error. Please try again.';
                }
                // Remove failed message from history
                chatHistory.pop();
            }
        }

        // Keyboard support for closing modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeApp();
                document.getElementById('settings-dropdown').classList.remove('show');
            }
        });
    </script>
</body>
</html>
